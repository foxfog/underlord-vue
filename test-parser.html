<!DOCTYPE html>
<html>
<head>
    <title>Scene Parser Test</title>
</head>
<body>
    <h1>Scene Parser Test</h1>
    <pre id="output"></pre>
    
    <script type="module">
        // Import the parser
        import { SceneParser } from './src/renderer/utils/sceneParser.js'
        
        // Sample scene content
        const sceneContent = `# Начальная сцена - точка входа для новых игр
# Ren'Py-подобный формат сцен

label start
	# Инициализация переменных игры
	$ game.time_of_day = "morning"
	$ game.visited_locations = 0
	$ game.choices_made = 0
	
	# Установка начального фона
	scene bg_mc_apartment
	
	# Вводное сообщение
	"Добро пожаловать в Underlord!"
	"Это визуальный роман, созданный с помощью Vue.js и Electron."
	
	# Показать первого персонажа
	show momonga at center
	
	# Первый диалог
	momonga "Привет! Я Момонга. Давай начнём?"
	
	# Меню с выборами
	menu:
		/ "Давай, я готов!" -> begin_game
		/ "Дай мне минутку..." -> pause_intro
	
label pause_intro
	"Конечно, жди."
	pause 2
	jump intro_menu

label intro_menu
	menu:
		/ "Начнём!" -> begin_game
		/ "Закрыть игру" -> end_game

label begin_game
	$ game.game_started = true
	$ game.visited_locations = 1
	
	hide momonga
	scene bg_test_location
	
	"Игра начинается..."
	
	jump main_story

label main_story
	"Здесь будет основная история."
	
	menu:
		/ "Продолжить" -> story_continue
		/ "К главному меню" -> return

label story_continue
	"История продолжается..."
	return

label end_game
	"До встречи!"
	return
`
        
        const parser = new SceneParser()
        const result = parser.parse(sceneContent)
        
        let output = '=== PARSED SCENE ===\n'
        output += 'Labels: ' + JSON.stringify(result.labels, null, 2) + '\n\n'
        output += '=== COMMANDS ===\n'
        result.commands.forEach((cmd, idx) => {
            output += `${idx}: ${cmd.type} (line ${cmd.lineNum})\n`
            output += JSON.stringify(cmd, null, 2) + '\n\n'
        })
        
        document.getElementById('output').textContent = output
    </script>
</body>
</html>
