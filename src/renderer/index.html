<!-- src/renderer/index.html -->

<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Underlord</title>
		<script>
			// Determine base path for asset loading
			// In Electron, __dirname is available in preload context
			// But for fetch requests, we need to calculate from window.location
			window.__APP_BASE__ = (() => {
				const url = new URL(window.location.href);
				// For file:// protocol, get the directory containing index.html
				if (url.protocol === 'file:') {
					const pathname = url.pathname;
					// Remove trailing /index.html and return with trailing slash
					const dir = pathname.substring(0, pathname.lastIndexOf('/') + 1);
					return dir;
				}
				// For http:// protocol (dev server), return root
				return '/';
			})();
			console.log('App base path:', window.__APP_BASE__);
		</script>
		<meta
			http-equiv="Content-Security-Policy"
			content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:"
		/>
	</head>

	<body>
		<div id="app"></div>
		<script src="/js/jquery.min.js"></script>
		<script src="/js/UI/_dropdown.js"></script>
		<script src="/js/UI/_scrollbar.js"></script>
		<script type="module" src="/renderer.js"></script>
	</body>
</html>
