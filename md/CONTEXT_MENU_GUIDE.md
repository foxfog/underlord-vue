# Контекстное меню инвентаря

## Обзор

Добавлено контекстное меню (правый клик) для предметов в инвентаре и оборудовании.

## Компоненты

### ContextMenu.vue
Новый компонент в`src/renderer/components/game/inventory/ContextMenu.vue`

- Отображается при правом клике на предмет
- Позиционируется в точке клика мыши
- Закрывается при клике вне меню

**Props:**
- `itemsData`: Объект с определениями предметов
- `equipmentSlots`: Объект со слотами оборудования

**Events:**
- `@equip`: Одеть предмет - `{ itemId, slot, inventoryIndex }`
- `@unequip`: Снять предмет - `{ slot, itemId, stackable }`
- `@drop`: Выбросить предмет - `{ itemId, source, slot }`

### InventoryItems.vue (обновление)
- Импортирован ContextMenu компонент
- Добавлены обработчики правого клика для предметов
- Добавлены методы для вызова контекстного меню

## Функциональность

### Предметы в инвентаре
При правом клике на предмет в инвентаре появляется меню с опциями:
- **Выбросить** - удаляет предмет (функция заготовлена)
- **Одеть на [часть тела]** - одевает предмет на соответствующий слот (если это одеваемый предмет)

Пример:
```
Выбросить
├─ Одеть на помощь маска
└─ Одеть на лицо
```

### Одетые предметы
При правом клике на одетый предмет (на теле персонажа) появляется меню с опциями:
- **Выбросить** - удаляет предмет
- **Снять** - снимает предмет и добавляет его в инвентарь

Пример:
```
Выбросить
└─ Снять
```

## Локализация слотов

Компонент автоматически переводит названия слотов на русский язык:

| Слот | Отображается |
|------|-------------|
| head | голова |
| neck / neck-1 / neck-2 | шея / шея (1) / шея (2) |
| chest | грудь |
| back | спина |
| hands | руки |
| left-hand | левая рука |
| right-hand | правая рука |
| legs | ноги |
| feet | ноги |
| mask | лицо |
| waist | пояс |

## Техническая информация

### Типы источников
- `'equipment'` - предмет надет на персонаже
- `'inventory'` - предмет находится в инвентаре

### Вызов контекстного меню

**Для предметов оборудования:**
```javascript
showEquipmentContextMenu(event, itemId, slot)
```

**Для предметов инвентаря:**
```javascript
showInventoryContextMenu(event, itemId, inventoryIndex)
```

### Обработка событий

События от контекстного меню пробрасываются родительскому компоненту через emit:

```javascript
// Одевание предмета
handleContextMenuEquip({ itemId, slot, inventoryIndex }) {
  emit('equip', { slot, itemId, inventoryIndex })
}

// Снятие предмета
handleContextMenuUnequip({ slot, itemId, stackable }) {
  emit('unequip', { slot, itemId, stackable })
}

// Выброс предмета (заготовка)
handleContextMenuDrop({ itemId, source, slot }) {
  // Функция для удаления предмета из игры
}
```

## Стилизация

Контекстное меню использует темную тему, соответствующую дизайну игры:
- Фон: `#2a2a2a` (темно-серый)
- Граница: `#444` (светло-серый)
- При наведении: `#3a3a3a` с белым текстом
- z-index: 10000 (выше всего остального)

## Использование в Game.vue

Компонент InventoryItems.vue пробрасывает события в родительский Game.vue, который уже содержит обработчики:

- `handleEquip()` - одевает предмет, заменяя существующий
- `handleUnequip()` - снимает предмет с поддержкой stackable
- `handleSwap()` - меняет предметы местами между слотами

Таким образом, контекстное меню полностью интегрирует существующую логику инвентаря.

## Примеры использования

### Пример 1: Одеть газовую маску из инвентаря
1. Правый клик на газовую маску в инвентаре
2. Появляется меню с опциями "Выбросить" и "Одеть на маска"
3. Клик на "Одеть на маска"
4. Маска одевается на персонажа, предмет удаляется из инвентаря

### Пример 2: Заменить одетую маску
1. На персонаже уже надета маска A
2. В инвентаре есть маска B
3. Правый клик на маску B
4. Клик "Одеть на маска"
5. Маска B одевается, маска A автоматически возвращается в инвентарь

### Пример 3: Снять предмет
1. Правый клик на надетую маску
2. Появляется меню "Выбросить" и "Снять"
3. Клик "Снять"
4. Маска снимается и добавляется в инвентарь как отдельный слот

## Особенности

✅ Полная локализация на русский язык
✅ Автоматические имена слотов
✅ Интеграция с существующей системой drag-and-drop
✅ Поддержка stackable и non-stackable предметов
✅ Правильное обращение с неоднозначными слотами (neck-1, neck-2)
✅ Темная тема, соответствующая дизайну игры
✅ Автоматическое закрытие при клике вне меню

## Планы на будущее

- [ ] Реализовать функцию "Выбросить" (удаление предмета)
- [ ] Добавить подтверждение перед выбросом ценных предметов
- [ ] Добавить горячие клавиши для быстрого доступа к опциям
- [ ] Добавить анимацию появления/исчезновения меню
