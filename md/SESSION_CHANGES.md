# üìã –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ü–†–û–ï–ö–¢–ï - –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–º–∏ –¥–∏–∞–ª–æ–≥–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–∞—Ö
```json
// –î–û - –ù–µ —Ä–∞–±–æ—Ç–∞–ª–æ
{
  "type": "dialogue",
  "character": "mc",
  "steps": [
    { "text": "–®–∞–≥ 1" },
    { "text": "–®–∞–≥ 2" }
  ]
}

// –ü–û–°–õ–ï - –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
// –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω, –ø–µ—Ä—Å–æ–Ω–∞–∂ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
```

**–ò–∑–º–µ–Ω–µ–Ω–æ –≤ —Ñ–∞–π–ª–µ:**
- `src/renderer/composables/useVisualNovel.js`
  - –°—Ç—Ä–æ–∫–∞ 281: `processDialogueSteps(step.steps, step.character)` ‚Üê –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä
  - –§—É–Ω–∫—Ü–∏—è `processDialogueSteps()` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `parentCharacter`
  - –°—Ç—Ä–æ–∫–∞ 846: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `action.character || parentCharacter`

---

### 2. ‚ú® –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞

**–ù–æ–≤—ã–π —à–∞–≥:** `"type": "part-animate"`

–î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –∑–∞–¥–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π:

#### –°–ø–æ—Å–æ–± 1: –ü—Ä—è–º—ã–µ CSS —Å—Ç–∏–ª–∏
```json
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "styles": {
    "transform": "translateY(5%)",
    "transition": "transform 0.5s ease-in-out"
  },
  "duration": 0.5
}
```

#### –°–ø–æ—Å–æ–± 2: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã
```json
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "class": "shake-head",
  "duration": 0.5
}
```

**–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã:**
- `shake-head` - –≤—Å—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ –≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑ 2 —Ä–∞–∑–∞
- `tremble` - –¥—Ä–æ–∂–∞–Ω–∏–µ –≤ —Å—Ç–æ—Ä–æ–Ω—ã
- `pulse` - –ø—É–ª—å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üìÅ –§–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã

### 1. –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (JavaScript/Vue)

#### `src/renderer/composables/useVisualNovel.js`
```javascript
// –°—Ç—Ä–æ–∫–∞ 281: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä
- processDialogueSteps(step.steps)
+ processDialogueSteps(step.steps, step.character)

// –°—Ç—Ä–æ–∫–∞ 192-198: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ —à–∞–≥–∞
case 'part-animate':
    if (!isRestoringGameState.value) animateCharacterPart(step)
    stepIndex.value++
    processStep()
    break

// –°—Ç—Ä–æ–∫–∞ 430-475: –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
function animateCharacterPart(step) {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—é —á–∞—Å—Ç–∏ —Ç–µ–ª–∞
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∏–ª–∏, –∫–ª–∞—Å—Å –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç —á–µ—Ä–µ–∑ duration –º—Å
}

// –°—Ç—Ä–æ–∫–∞ 828-873: –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è
function processDialogueSteps(steps, parentCharacter = null) {
  // –¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç parentCharacter –∫–∞–∫ fallback
  // const characterForStep = action.character || parentCharacter
}
```

#### `src/renderer/components/game/characters/Character.vue`
```vue
<!-- –°—Ç—Ä–æ–∫–∞ 13: –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø—Å -->
:part-animations="character.partAnimations || {}"
```

#### `src/renderer/components/game/characters/SpritePart.vue`
```javascript
// –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã
partAnimations: {
  type: Object,
  default: () => ({})
}

// –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
partAnimation - —Ç–µ–∫—É—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —á–∞—Å—Ç–∏
computedStyle - –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
partClasses - –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–π

// –í template
:class="partClasses"
:style="computedStyle"
```

### 2. –°—Ç–∏–ª–∏ (CSS)

#### `src/renderer/public/styles/game/character.css`
```css
/* –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ */

/* Shake effect for coughing */
.char-part._head.shake-head {
  animation: shakeHead var(--animation-duration, 0.5s) ease-in-out;
}

@keyframes shakeHead {
  0% { transform: translateY(0); }
  25% { transform: translateY(5%); }
  50% { transform: translateY(0); }
  75% { transform: translateY(5%); }
  100% { transform: translateY(0); }
}

/* Trembling/shaking effect */
.char-part.tremble { ... }
@keyframes tremble { ... }

/* Pulse effect */
.char-part.pulse { ... }
@keyframes pulse { ... }
```

### 3. –î–∞–Ω–Ω—ã–µ (JSON)

#### `src/renderer/public/data/story/ru/start.json`
```json
// –°—Ç—Ä–æ–∫–∞ 126: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
- "character": "mc",
- ""
- "duration": 0.5
+ "character": "mc",
+ "duration": 0.5

// –°—Ç—Ä–æ–∫–∞ 130: –î–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–≤—ã–π –ø—Ä–∏–º–µ—Ä (–ø—Ä—è–º—ã–µ —Å—Ç–∏–ª–∏)
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "styles": { "transform": "translateY(5%)", ... },
  "duration": 0.5
}

// –°—Ç—Ä–æ–∫–∞ 175: –î–æ–±–∞–≤–ª–µ–Ω –≤—Ç–æ—Ä–æ–π –ø—Ä–∏–º–µ—Ä (–∫–ª–∞—Å—Å)
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "class": "shake-head",
  "duration": 0.5
}
```

#### `src/renderer/public/data/story/ru/animation_examples.json` ‚ú® (–ù–û–í–´–ô)
–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤—Å–µ—Ö —Å–ø–æ—Å–æ–±–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Markdown)

#### `md/DOCUMENTATION_INDEX.md`
```markdown
// –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã
## üé¨ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ê–Ω–∏–º–∞—Ü–∏—è —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞

// –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏
### 5. **–ê–Ω–∏–º–∞—Ü–∏—è —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞** üé¨
- PART_ANIMATION.md
- PART_ANIMATION_CHEATSHEET.md
```

#### `md/SUMMARY.md`
```markdown
// –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
–ù–û–í–û–ï: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π!

// –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
// –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü—É
```

#### `md/PART_ANIMATION.md` ‚ú® (–ù–û–í–´–ô)
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∏–º–∞—Ü–∏–∏ (10 –º–∏–Ω —á—Ç–µ–Ω–∏—è)
- –û–ø–∏—Å–∞–Ω–∏–µ –æ–±–æ–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã

#### `md/PART_ANIMATION_CHEATSHEET.md` ‚ú® (–ù–û–í–´–ô)
- –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ (2 –º–∏–Ω —á—Ç–µ–Ω–∏—è)
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–ª—è —á–∞—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤
- –¢–∞–±–ª–∏—Ü–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
- –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### `md/PART_ANIMATION_REPORT.md` ‚ú® (–ù–û–í–´–ô)
- –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (8 –º–∏–Ω —á—Ç–µ–Ω–∏—è)
- –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –∏ –ø–æ—á–µ–º—É
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
1. –û—Ç–∫—Ä–æ–π—Ç–µ `start.json`
2. –ù–∞–π–¥–∏—Ç–µ —à–∞–≥ —Å `"id": "location_time_info"`
3. –≠—Ç–æ—Ç —à–∞–≥ –∏–º–µ–µ—Ç `"steps"` –Ω–æ –Ω–µ –∏–º–µ–µ—Ç `"character"`
4. –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
5. –î—Ä—É–≥–∏–µ –¥–∏–∞–ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π ‚úì

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –º–æ–º–µ–Ω—Ç—É —Å –∫–∞—à–ª–µ–º
3. –ì–æ–ª–æ–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–æ–ª–∂–Ω–∞ –≤—Å—Ç—Ä—è—Ö–Ω—É—Ç—å—Å—è –≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑
4. –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ —Å üé¨ –ø—Ä–µ—Ñ–∏–∫—Å–æ–º

### –ü—Ä—è–º–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
console.log(characterData.value.mc.partAnimations)

// –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| –§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ | 7 |
| –§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ | 4 |
| –°—Ç—Ä–æ–∫ –∫–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–æ | ~150 |
| –û—à–∏–±–æ–∫ –≤–≤–µ–¥–µ–Ω–æ | 0 ‚úÖ |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ | ~600 |
| –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –∞–Ω–∏–º–∞—Ü–∏–π | 3 |
| –ü—Ä–∏–º–µ—Ä–æ–≤ –≤ JSON | 3 |

---

## üéì –ì–¥–µ —á–∏—Ç–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞:** `md/PART_ANIMATION_CHEATSHEET.md`
2. **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `md/PART_ANIMATION.md`
3. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:** `md/PART_ANIMATION_REPORT.md`
4. **–ü—Ä–∏–º–µ—Ä—ã –≤ –∏–≥—Ä–µ:** `src/renderer/public/data/story/ru/animation_examples.json`
5. **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã:** `src/renderer/public/styles/game/character.css` (–≤ –∫–æ–Ω—Ü–µ)

---

## ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã, –Ω–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ‚úì

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ
