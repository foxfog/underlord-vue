# üé¨ –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ - –û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–º–∏ –¥–∏–∞–ª–æ–≥–∞–º–∏
**–§–∞–π–ª:** `src/renderer/composables/useVisualNovel.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–≥–¥–∞ –¥–∏–∞–ª–æ–≥ –∏–º–µ–ª –ø–æ–ª–µ `"steps"`, –ø–µ—Ä—Å–æ–Ω–∞–∂, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –æ–±—ä–µ–∫—Ç–µ –¥–∏–∞–ª–æ–≥–∞, –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `processDialogueSteps()` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `parentCharacter`
- –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞—ë–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ: `processDialogueSteps(step.steps, step.character)`
- –ö–∞–∂–¥—ã–π —à–∞–≥ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ

**–ü—Ä–∏–º–µ—Ä:**
```json
{
  "type": "dialogue",
  "character": "mc",
  "steps": [
    { "text": "–®–∞–≥ 1" },
    { "text": "–®–∞–≥ 2 –æ—Ç mc" }
  ]
}
```

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞

**–§–∞–π–ª—ã:**
- `src/renderer/composables/useVisualNovel.js` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ `part-animate`
- `src/renderer/components/game/characters/Character.vue` - –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
- `src/renderer/components/game/characters/SpritePart.vue` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π
- `src/renderer/public/styles/game/character.css` - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–π

**–î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –∑–∞–¥–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π:**

#### –°–ø–æ—Å–æ–± 1: –ü—Ä—è–º—ã–µ CSS —Å—Ç–∏–ª–∏
```json
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "styles": {
    "transform": "translateY(5%)",
    "transition": "transform 0.5s ease-in-out",
    "opacity": "0.8"
  },
  "duration": 0.5
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω–∞—è —Å–≤–æ–±–æ–¥–∞ –≤ –∑–∞–¥–∞–Ω–∏–∏ –ª—é–±—ã—Ö CSS —Å–≤–æ–π—Å—Ç–≤
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—ã –∏ —Å—Ç–∏–ª–∏
- –£–¥–æ–±–Ω–æ –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π

#### –°–ø–æ—Å–æ–± 2: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã
```json
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "class": "shake-head",
  "duration": 0.5
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª–∞—Å—Å—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `--animation-duration`
- –ë—ã—Å—Ç—Ä–æ –ø–∏—Å–∞—Ç—å, –µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∫–ª–∞—Å—Å

### 3. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–π

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `character.css`:

| –ö–ª–∞—Å—Å | –≠—Ñ—Ñ–µ–∫—Ç | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|-------|--------|-------------------|
| `shake-head` | –í—Å—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ –≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑ (2 —Ä–∞–∑–∞ –ø–æ 5%) | –ö–∞—à–µ–ª—å, —É–¥–∞—Ä, –±–æ–ª—å |
| `tremble` | –î—Ä–æ–∂–∞–Ω–∏–µ –≤ —Å—Ç–æ—Ä–æ–Ω—ã | –•–æ–ª–æ–¥, —Å—Ç—Ä–∞—Ö, —Å–ª–∞–±–æ—Å—Ç—å |
| `pulse` | –ü—É–ª—å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5%) | –ë–∏–µ–Ω–∏–µ —Å–µ—Ä–¥—Ü–∞, —Ä–∞–¥–æ—Å—Ç—å |

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç:**
```css
.char-part._head.shake-head {
  animation: shakeHead var(--animation-duration, 0.5s) ease-in-out;
}

@keyframes shakeHead {
  0% { transform: translateY(0); }
  25% { transform: translateY(5%); }
  50% { transform: translateY(0); }
  75% { transform: translateY(5%); }
  100% { transform: translateY(0); }
}
```

–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `--animation-duration` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ!

### 4. –û–±–Ω–æ–≤–ª—ë–Ω —Å–ø—Ä–∞–π—Ç–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–§–∞–π–ª:** `src/renderer/components/game/characters/SpritePart.vue`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü—Ä–æ–ø—Å `partAnimations` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
- –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `partAnimation` –¥–ª—è —Ç–µ–∫—É—â–µ–π —á–∞—Å—Ç–∏ —Ç–µ–ª–∞
- –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `computedStyle` - –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `partClasses` - –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–π
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `--animation-duration`

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `md/PART_ANIMATION.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (10 –º–∏–Ω —á—Ç–µ–Ω–∏—è)
- `md/PART_ANIMATION_CHEATSHEET.md` - —à–ø–∞—Ä–≥–∞–ª–∫–∞ (2 –º–∏–Ω —á—Ç–µ–Ω–∏—è)
- `src/renderer/public/data/story/ru/animation_examples.json` - –ø—Ä–∏–º–µ—Ä—ã –≤ –¥–µ–π—Å—Ç–≤–∏–∏

**–û–±–Ω–æ–≤–ª–µ–Ω—ã:**
- `md/DOCUMENTATION_INDEX.md` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```javascript
character.partAnimations = {
  "head": {
    styles: {
      "transform": "translateY(5%)",
      "transition": "transform 0.5s ease-in-out"
    },
    class: null,
    animationDuration: 500  // –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
  },
  "hand_right": {
    styles: null,
    class: "shake-head",
    animationDuration: 1000
  }
}
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∞–Ω–∏–º–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ:** –®–∞–≥ `part-animate` –≤—ã–∑—ã–≤–∞–µ—Ç `animateCharacterPart(step)`
2. **–•—Ä–∞–Ω–µ–Ω–∏–µ:** –ö–æ–Ω—Ñ–∏–≥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `character.partAnimations[partName]`
3. **–ü–µ—Ä–µ–¥–∞—á–∞:** –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø—Ä–æ–ø—Å–æ–º `partAnimations` –≤ `SpritePart`
4. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –í `SpritePart` –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∫–ª–∞—Å—Å—ã –∏ —Å—Ç–∏–ª–∏
5. **–£–¥–∞–ª–µ–Ω–∏–µ:** –ß–µ—Ä–µ–∑ `duration` –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –∞–Ω–∏–º–∞—Ü–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º üé¨:
```
üé¨ [mc] Part animation: part=head, class=shake-head, duration=0.5s, styles=null
üé¨ [mc] Part animation cleared: part=head
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ `http://localhost:5173`)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∏–≥—Ä—É
3. –ù–∞–π–¥–∏—Ç–µ –º–æ–º–µ–Ω—Ç —Å –∫–∞—à–ª–µ–º - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—Å—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ –≥–æ–ª–æ–≤—ã
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –≤ `animation_examples.json` (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—Å—è –≤ –º–µ–Ω—é)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

```javascript
// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
console.log(characterData.value.mc.partAnimations)

// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
// üé¨ [mc] Part animation: part=head, class=shake-head, duration=0.5s
```

---

## üé® –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ö–∞—à–µ–ª—å —Å –≤—Å—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ–º
```json
{
  "type": "voice",
  "file": "audio/voice/cough.mp3"
},
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "class": "shake-head",
  "duration": 0.5
}
```

### –ë–æ–ª—å - –Ω–∞–∫–ª–æ–Ω –∏ –≤—Å—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ
```json
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "styles": {
    "transform": "rotate(-20deg) translateY(-15%)",
    "transition": "transform 0.3s ease-in-out"
  },
  "duration": 0.3
}
```

### –î—Ä–æ–∂–∞–Ω–∏–µ –æ—Ç —Ö–æ–ª–æ–¥–∞
```json
{
  "type": "part-animate",
  "character": "mc",
  "part": "body",
  "class": "tremble",
  "duration": 1.5
}
```

---

## üîß –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ `src/renderer/public/styles/game/character.css`
2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª–∞—Å—Å –∏ keyframes:

```css
.char-part._head.my-animation {
  animation: myAnimation var(--animation-duration, 1s) ease-in-out;
}

@keyframes myAnimation {
  0% { ... }
  50% { ... }
  100% { ... }
}
```

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ JSON:
```json
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "class": "my-animation",
  "duration": 1
}
```

**–í–∞–∂–Ω–æ:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `var(--animation-duration, fallback-value)` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏!

---

## üìù –§–∞–π–ª—ã –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

### –û–±–Ω–æ–≤–ª–µ–Ω—ã:
- ‚úÖ `src/renderer/composables/useVisualNovel.js` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `part-animate` –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `processDialogueSteps`
- ‚úÖ `src/renderer/components/game/characters/Character.vue` - –ø–µ—Ä–µ–¥–∞—á–∞ `partAnimations` –≤ SpritePart
- ‚úÖ `src/renderer/components/game/characters/SpritePart.vue` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π
- ‚úÖ `src/renderer/public/styles/game/character.css` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–π
- ‚úÖ `src/renderer/public/data/story/ru/start.json` - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ `md/DOCUMENTATION_INDEX.md` - —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –°–æ–∑–¥–∞–Ω—ã:
- ‚ú® `md/PART_ANIMATION.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚ú® `md/PART_ANIMATION_CHEATSHEET.md` - —à–ø–∞—Ä–≥–∞–ª–∫–∞
- ‚ú® `src/renderer/public/data/story/ru/animation_examples.json` - –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∏–≥—Ä—ã

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞**

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç:
1. –ê–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏ —Ç–µ–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è
3. –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ CSS —Å—Ç–∏–ª–∏
4. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±–µ –º–µ—Ç–æ–¥–∏–∫–∏ –≤ –æ–¥–Ω–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–ü—Ä–∏–º–µ—Ä:** 
```json
{
  "type": "part-animate",
  "character": "mc",
  "part": "head",
  "class": "shake-head",
  "duration": 0.5
}
```

–≠—Ç–æ –≤—Å—ë! üöÄ
